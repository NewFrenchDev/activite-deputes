diff --git a/frontend/index.html b/frontend/index.html
index e3cb9f1415eaaa61120e07d597d5dafd45c5a710..f3b8c1687ec9782a798cc94f334d6ca954fb4056 100644
--- a/frontend/index.html
+++ b/frontend/index.html
@@ -236,50 +236,99 @@
 
     /* Drawer */
     .filter-drawer {
       transform: translateX(-100%);
       transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
     }
     .filter-drawer.open { transform: none; }
     @media (prefers-reduced-motion: reduce) {
       .filter-drawer { transition: none; }
     }
 
     /* Scrollbar */
     ::-webkit-scrollbar { width: 6px; height: 6px; }
     ::-webkit-scrollbar-track { background: var(--bg-primary); }
     ::-webkit-scrollbar-thumb { background: var(--bg-border); border-radius: 3px; }
     ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
 
     /* Reveal animation */
     @keyframes reveal { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: none; } }
     .reveal { animation: reveal 0.35s ease forwards; }
 
     /* Nav */
     nav a { transition: color 0.15s; }
     nav a.active { color: var(--accent); border-bottom: 1px solid var(--accent); }
 
+    .nav-active { color: var(--accent) !important; border-bottom-color: var(--accent) !important; }
+    .mobile-only { display: none; }
+    .desktop-nav { display: flex; }
+
+    @media (max-width: 1024px) {
+      .header-banner-row, .header-main-row { padding-left: 1rem !important; padding-right: 1rem !important; }
+      main { padding: 1rem !important; }
+      .data-table th, .data-table td { padding: 0.5rem 0.55rem; font-size: 0.76rem; }
+      .kpi-card { padding: 1rem; }
+      .reseau-main-grid { grid-template-columns: minmax(220px, 300px) 1fr; }
+    }
+
+    @media (max-width: 800px) {
+      .desktop-only { display: none !important; }
+      .desktop-nav { display: none !important; }
+      .mobile-only { display: inline-flex !important; }
+      .header-banner-text { display: none; }
+      .nav-shell { display: none; border-top: 1px solid var(--bg-border); }
+      .nav-shell.open { display: block; }
+      .nav-shell nav {
+        display: grid !important;
+        grid-template-columns: 1fr;
+        gap: 0;
+        padding: 0 !important;
+      }
+      .nav-shell nav a {
+        height: auto !important;
+        min-height: 44px;
+        border-bottom: 1px solid var(--bg-border) !important;
+      }
+      .btn { padding: 0.4rem 0.75rem; font-size: 0.78rem; }
+
+      .cmp-select-grid { grid-template-columns: 1fr !important; gap: 0.9rem !important; }
+      .cmp-table-wrap { overflow-x: auto !important; }
+      .cmp-table-wrap .data-table { min-width: 620px; }
+
+      .depute-hero-top { flex-direction: column; }
+      .depute-period-panel { width: 100%; min-width: 0 !important; align-items: stretch !important; }
+      .depute-period-card { min-width: 0 !important; width: 100%; }
+
+      .reseau-main-grid { grid-template-columns: 1fr !important; }
+      .reseau-edge-row,
+      .reseau-partner-row { grid-template-columns: 1fr !important; gap: 0.35rem !important; }
+    }
+
+    @media (min-width: 801px) {
+      .nav-shell { display: none !important; }
+    }
+
     /* Badge groupe */
     .badge {
       display: inline-block;
       font-size: 0.65rem;
       font-weight: 600;
       padding: 0.1rem 0.4rem;
       border-radius: 3px;
       letter-spacing: 0.04em;
       text-transform: uppercase;
       background: var(--bg-tertiary);
       color: var(--text-secondary);
       border: 1px solid var(--bg-border);
     }
 
     /* Input */
     input[type="text"], select {
       background: var(--bg-secondary);
       border: 1px solid var(--bg-border);
       color: var(--text-primary);
       border-radius: 6px;
       padding: 0.45rem 0.75rem;
       font-size: 0.85rem;
       outline: none;
       width: 100%;
       transition: border-color 0.2s;
diff --git a/frontend/src/components/layout.rs b/frontend/src/components/layout.rs
index f20fee146b5cd0d59397874bb18d98458e89d053..551bd5898e37b6d19e457fc4c084b0e05d47abd6 100644
--- a/frontend/src/components/layout.rs
+++ b/frontend/src/components/layout.rs
@@ -1,109 +1,132 @@
 use leptos::*;
 use leptos_router::*;
 
 use crate::api::{fetch_status, inferred_github_repo_urls};
-use crate::utils::app_href;
-
 #[component]
 pub fn Layout(children: Children) -> impl IntoView {
     let status_res = create_resource(|| (), |_| fetch_status());
     let repo_links = inferred_github_repo_urls();
     let repo_url = repo_links.as_ref().map(|(r, _)| r.clone());
     let issue_url = repo_links.as_ref().map(|(_, i)| i.clone());
     let (theme, set_theme) = create_signal(String::from("dark"));
+    let (mobile_nav_open, set_mobile_nav_open) = create_signal(false);
 
     let toggle_theme = move |_| {
         let next = if theme.get() == "dark" {
             "light"
         } else {
             "dark"
         };
         set_theme.set(next.to_string());
         if let Some(html) = web_sys::window()
             .and_then(|w| w.document())
             .and_then(|d| d.document_element())
         {
             let _ = html.set_attribute("class", next);
         }
     };
 
     view! {
         <div style="min-height:100vh;display:flex;flex-direction:column;">
             <header style="background:var(--bg-secondary);border-bottom:1px solid var(--bg-border);position:sticky;top:0;z-index:50;">
                 <div style="background:linear-gradient(90deg, rgba(245,158,11,.16), rgba(245,158,11,.06));border-bottom:1px solid rgba(245,158,11,.22);">
-                    <div style="max-width:1400px;margin:0 auto;padding:0.35rem 1.5rem;display:flex;align-items:center;justify-content:space-between;gap:0.75rem;flex-wrap:wrap;">
+                    <div class="header-banner-row" style="max-width:1400px;margin:0 auto;padding:0.35rem 1.5rem;display:flex;align-items:center;justify-content:space-between;gap:0.75rem;flex-wrap:wrap;">
                         <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;">
                             <span style="font-size:0.65rem;font-weight:700;letter-spacing:.04em;padding:0.15rem 0.45rem;border-radius:999px;background:rgba(245,158,11,.2);border:1px solid rgba(245,158,11,.35);color:var(--warning);">"BÊTA PUBLIQUE"</span>
-                            <span style="font-size:0.76rem;color:var(--text-secondary);">"Le site est fonctionnel mais en amélioration continue (UX, liens AN, couverture données)."</span>
+                            <span class="header-banner-text" style="font-size:0.76rem;color:var(--text-secondary);">"Le site est fonctionnel mais en amélioration continue (UX, liens AN, couverture données)."</span>
                         </div>
                         <div style="display:flex;align-items:center;gap:.7rem;flex-wrap:wrap;">
                             <A href=crate::app_path!("/methodologie") attr:style="font-size:0.75rem;color:var(--accent);text-decoration:none;">"Méthode & limites"</A>
                             {match issue_url.clone() {
                                 Some(url) => view! {
                                     <a href=url target="_blank" rel="noopener noreferrer" style="font-size:0.75rem;color:var(--accent);text-decoration:none;">"Signaler un problème ↗"</a>
                                 }.into_view(),
                                 None => view! {
                                     <A href=crate::app_path!("/methodologie#retours") attr:style="font-size:0.75rem;color:var(--accent);text-decoration:none;">"Feedback"</A>
                                 }.into_view(),
                             }}
                         </div>
                     </div>
                 </div>
-                <div style="max-width:1400px;margin:0 auto;padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between;height:56px;">
-                    <div style="display:flex;align-items:center;gap:2rem;">
-                        <A href=crate::app_path!("/home") attr:style="display:flex;align-items:center;gap:0.6rem;text-decoration:none;">
-                            <span style="width:28px;height:28px;background:var(--accent);border-radius:6px;display:flex;align-items:center;justify-content:center;">
+                <div class="header-main-row" style="max-width:1400px;margin:0 auto;padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between;min-height:56px;gap:0.75rem;">
+                    <div style="display:flex;align-items:center;gap:1.2rem;min-width:0;">
+                        <A href=crate::app_path!("/home") attr:style="display:flex;align-items:center;gap:0.5rem;text-decoration:none;min-width:0;">
+                            <span style="width:28px;height:28px;background:var(--accent);border-radius:6px;display:flex;align-items:center;justify-content:center;flex:0 0 auto;">
                                 <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2.5">
                                     <rect x="3" y="3" width="18" height="18" rx="2"/>
                                     <path d="M3 9h18M9 21V9"/>
                                 </svg>
                             </span>
                             <span style="font-weight:700;font-size:0.95rem;color:var(--text-primary)">Activité Députés</span>
-                            <span style="font-size:0.62rem;padding:0.12rem 0.35rem;border-radius:999px;border:1px solid rgba(245,158,11,.35);color:var(--warning);background:rgba(245,158,11,.08);font-weight:600;">"BETA"</span>
-                            <span style="font-size:0.65rem;color:var(--text-muted);font-weight:400;margin-top:2px;">"17e législature"</span>
+                            <span class="desktop-only" style="font-size:0.62rem;padding:0.12rem 0.35rem;border-radius:999px;border:1px solid rgba(245,158,11,.35);color:var(--warning);background:rgba(245,158,11,.08);font-weight:600;">"BETA"</span>
+                            <span class="desktop-only" style="font-size:0.65rem;color:var(--text-muted);font-weight:400;margin-top:2px;">"17e législature"</span>
                         </A>
-                        <nav style="display:flex;gap:0;padding-left:1rem;border-left:1px solid var(--bg-border);" aria-label="Navigation principale">
+                        <nav class="desktop-nav" style="display:flex;gap:0;padding-left:1rem;border-left:1px solid var(--bg-border);" aria-label="Navigation principale">
                             <NavLink path=crate::app_path!("/home") label="Accueil" />
                             <NavLink path=crate::app_path!("/comparer") label="Comparer" />
                             <NavLink path=crate::app_path!("/exporter") label="Exporter" />
                             <NavLink path=crate::app_path!("/stats-globales") label="Stats globales" />
                             <NavLink path=crate::app_path!("/reseau") label="Réseau" />
                             <NavLink path=crate::app_path!("/positions-groupes") label="Positions groupes" />
                             <NavLink path=crate::app_path!("/methodologie") label="Méthode & Sources" />
                         </nav>
                     </div>
-                    <div style="display:flex;align-items:center;gap:0.75rem;">
+                    <div style="display:flex;align-items:center;gap:0.5rem;">
+                        <button
+                            class="mobile-only"
+                            on:click=move |_| set_mobile_nav_open.update(|v| *v = !*v)
+                            style="background:none;border:1px solid var(--bg-border);border-radius:6px;padding:0.35rem 0.6rem;cursor:pointer;color:var(--text-secondary);font-size:0.8rem;"
+                            title="Afficher/masquer le menu"
+                            aria-label="Ouvrir le menu de navigation"
+                        >
+                            {move || if mobile_nav_open.get() { "✕" } else { "☰" }}
+                        </button>
                         <button
                             on:click=toggle_theme
                             style="background:none;border:1px solid var(--bg-border);border-radius:6px;padding:0.35rem 0.6rem;cursor:pointer;color:var(--text-secondary);font-size:0.8rem;"
                             title="Basculer thème clair/sombre"
                         >
                             {move || if theme.get() == "dark" { "☀ Clair" } else { "⚫ Sombre" }}
                         </button>
                     </div>
                 </div>
+                <div
+                    class="nav-shell"
+                    class:open=move || mobile_nav_open.get()
+                    on:click=move |_| set_mobile_nav_open.set(false)
+                >
+                    <nav style="display:flex;gap:0;padding:0 1.5rem;border-top:1px solid var(--bg-border);" aria-label="Navigation principale">
+                        <NavLink path=crate::app_path!("/home") label="Accueil" />
+                        <NavLink path=crate::app_path!("/comparer") label="Comparer" />
+                        <NavLink path=crate::app_path!("/exporter") label="Exporter" />
+                        <NavLink path=crate::app_path!("/stats-globales") label="Stats globales" />
+                        <NavLink path=crate::app_path!("/reseau") label="Réseau" />
+                        <NavLink path=crate::app_path!("/positions-groupes") label="Positions groupes" />
+                        <NavLink path=crate::app_path!("/methodologie") label="Méthode & Sources" />
+                    </nav>
+                </div>
             </header>
 
             <main style="flex:1;max-width:1400px;margin:0 auto;padding:1.5rem;width:100%;">
                 {children()}
             </main>
 
             <footer style="border-top:1px solid var(--bg-border);padding:1.1rem 1.5rem;text-align:center;background:var(--bg-secondary);">
                 <div style="max-width:1400px;margin:0 auto;display:flex;flex-direction:column;gap:0.45rem;align-items:center;">
                     <p style="font-size:0.75rem;color:var(--text-muted);margin:0;">
                         "Données : "
                         <a href="https://data.assemblee-nationale.fr" target="_blank" rel="noopener" style="color:var(--accent);">
                             "data.assemblee-nationale.fr"
                         </a>
                         " — Open data Assemblée nationale — Licence Ouverte v2.0"
                         " · Ce site ne contient pas d'opinion ni de commentaire éditorial. "
                         <A href=crate::app_path!("/methodologie") attr:style="color:var(--accent);">"Méthode & Sources"</A>
                     </p>
                     <div style="font-size:0.74rem;color:var(--text-muted);display:flex;align-items:center;gap:.45rem;flex-wrap:wrap;justify-content:center;">
                         {match repo_url.clone() {
                             Some(url) => view! { <a href=url target="_blank" rel="noopener noreferrer" style="color:var(--accent);text-decoration:none;">"Code source GitHub ↗"</a> }.into_view(),
                             None => view! { <span>"Code source : lien GitHub à ajouter dans le README / footer"</span> }.into_view(),
                         }}
                         <span style="opacity:.55;">"·"</span>
                         {match issue_url.clone() {
                             Some(url) => view! { <a href=url target="_blank" rel="noopener noreferrer" style="color:var(--accent);text-decoration:none;">"Feedback / Issues ↗"</a> }.into_view(),
@@ -111,33 +134,33 @@ pub fn Layout(children: Children) -> impl IntoView {
                         }}
                     </div>
                     <div style="font-size:0.74rem;color:var(--text-muted);">
                         {move || match status_res.get() {
                             None => view! { <span>"Mise à jour des données : vérification..."</span> }.into_view(),
                             Some(Err(_)) => view! { <span>"Mise à jour des données : indisponible (status.json non chargé)"</span> }.into_view(),
                             Some(Ok(s)) => view! {
                                 <span>
                                     "Dernière mise à jour des données : "
                                     <strong style="color:var(--text-secondary);">{s.last_update_readable}</strong>
                                 </span>
                             }.into_view(),
                         }}
                     </div>
                 </div>
             </footer>
         </div>
     }
 }
 
 #[component]
 fn NavLink(path: &'static str, label: &'static str) -> impl IntoView {
     view! {
         <A
             href=path
-            attr:style="padding:0 0.85rem;height:56px;display:flex;align-items:center;font-size:0.82rem;color:var(--text-secondary);text-decoration:none;border-bottom:2px solid transparent;transition:all 0.15s;"
+            attr:style="padding:0 0.85rem;height:48px;display:flex;align-items:center;font-size:0.82rem;color:var(--text-secondary);text-decoration:none;border-bottom:2px solid transparent;transition:all 0.15s;"
             active_class="nav-active"
             exact=true
         >
             {label}
         </A>
     }
 }
diff --git a/frontend/src/pages/comparer.rs b/frontend/src/pages/comparer.rs
index bb1d4a4be02f4299d0649a1ac9ed4b232d9651d5..49eeb1bda3aedcae08bd03cf45ce4b21cf0fd8dd 100644
--- a/frontend/src/pages/comparer.rs
+++ b/frontend/src/pages/comparer.rs
@@ -1,125 +1,129 @@
 use leptos::*;
 use leptos_router::use_query_map;
 use wasm_bindgen::JsCast;
 
-use crate::store::use_store;
+use crate::components::period_selector::PeriodSelector;
 use crate::models::*;
+use crate::store::use_store;
 use crate::utils::{fmt_pct, groupe_color, matches_search};
-use crate::components::period_selector::PeriodSelector;
 
 fn period_from_query(raw: &str) -> Option<Period> {
     let s = raw.trim().to_ascii_lowercase();
     match s.as_str() {
         "p30" | "30" | "30j" | "30d" | "30days" => Some(Period::P30),
         "p180" | "180" | "180j" | "180d" | "180days" => Some(Period::P180),
         "leg" | "legislature" | "l17" => Some(Period::Leg),
         _ => None,
     }
 }
 
 #[component]
 pub fn ComparerPage() -> impl IntoView {
     let store = use_store();
     let (period, set_period) = create_signal(Period::P180);
     let query = use_query_map();
 
     let (selected_a_id, set_selected_a_id) = create_signal::<Option<String>>(None);
     let (selected_b_id, set_selected_b_id) = create_signal::<Option<String>>(None);
 
     let raw_stats = create_memo(move |_| {
-        store.stats_for(period.get()).get().and_then(|r| r.ok()).unwrap_or_default()
+        store
+            .stats_for(period.get())
+            .get()
+            .and_then(|r| r.ok())
+            .unwrap_or_default()
     });
 
     let raw_stats_a = raw_stats.clone();
     let selected_a = create_memo(move |_| {
         let selected_id = selected_a_id.get();
         let stats = raw_stats_a.get();
         selected_id.and_then(|id| stats.into_iter().find(|d| d.deputy_id == id))
     });
     let raw_stats_b = raw_stats.clone();
     let selected_b = create_memo(move |_| {
         let selected_id = selected_b_id.get();
         let stats = raw_stats_b.get();
         selected_id.and_then(|id| stats.into_iter().find(|d| d.deputy_id == id))
     });
 
     create_effect(move |_| {
         query.with(|q| {
             if let Some(a) = q.get("a").filter(|s| !s.trim().is_empty()) {
                 set_selected_a_id.set(Some(a.clone()));
             }
             if let Some(b) = q.get("b").filter(|s| !s.trim().is_empty()) {
                 set_selected_b_id.set(Some(b.clone()));
             }
             if let Some(p) = q.get("period").and_then(|v| period_from_query(v)) {
                 set_period.set(p);
             }
         });
     });
 
     view! {
         <div class="reveal">
             <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem;">
                 <div>
                     <h1 style="font-size:1.4rem;font-weight:700;margin:0 0 0.25rem 0;">"Comparer deux députés"</h1>
                     <p style="color:var(--text-muted);font-size:0.82rem;margin:0;">"Sélectionnez deux députés pour une comparaison côte à côte"</p>
                 </div>
                 <PeriodSelector period=period set_period=set_period />
             </div>
 
-            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem;">
+            <div class="cmp-select-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem;">
                 <Combobox
                     label="Député A"
                     color="var(--accent)"
                     all_stats=raw_stats
                     selected=selected_a
                     on_select=move |d| set_selected_a_id.set(Some(d.deputy_id.clone()))
                     on_clear=move || set_selected_a_id.set(None)
                 />
                 <Combobox
                     label="Député B"
                     color="#a78bfa"
                     all_stats=raw_stats
                     selected=selected_b
                     on_select=move |d| set_selected_b_id.set(Some(d.deputy_id.clone()))
                     on_clear=move || set_selected_b_id.set(None)
                 />
             </div>
 
             {move || {
                 let a = selected_a.get();
                 let b = selected_b.get();
                 if a.is_none() && b.is_none() {
                     return view! {
                         <div style="text-align:center;padding:3rem;color:var(--text-muted);border:1px dashed var(--bg-border);border-radius:8px;">
                             "Sélectionnez deux députés ci-dessus pour lancer la comparaison"
                         </div>
                     }.into_view();
                 }
                 view! {
-                    <div style="background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:8px;overflow:hidden;">
+                    <div class="cmp-table-wrap" style="background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:8px;overflow:hidden;overflow-x:auto;">
                         <table class="data-table" style="table-layout:fixed;">
                             <colgroup>
                                 <col style="width:220px;"/>
                                 <col/>
                                 <col/>
                             </colgroup>
                             <thead>
                                 <tr>
                                     <th>"Indicateur"</th>
                                     <th style="color:var(--accent);">
                                         {a.as_ref().map(|d| format!("{} {}", d.prenom, d.nom)).unwrap_or_else(|| "—".to_string())}
                                     </th>
                                     <th style="color:#a78bfa;">
                                         {b.as_ref().map(|d| format!("{} {}", d.prenom, d.nom)).unwrap_or_else(|| "—".to_string())}
                                     </th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <CmpRow label="Groupe"
                                     va=a.as_ref().map(|d| d.groupe_abrev.clone().unwrap_or_default())
                                     vb=b.as_ref().map(|d| d.groupe_abrev.clone().unwrap_or_default()) />
                                 <CmpRow label="Département"
                                     va=a.as_ref().map(|d| d.dept.clone().unwrap_or_default())
                                     vb=b.as_ref().map(|d| d.dept.clone().unwrap_or_default()) />
                                 <CmpRow label="Période de calcul"
@@ -155,59 +159,62 @@ pub fn ComparerPage() -> impl IntoView {
                                     vb=b.as_ref().map(|d| d.amd_cosigned as f64)
                                     fmt=fmt_u32 higher_better=true />
                             </tbody>
                         </table>
                     </div>
                 }.into_view()
             }}
         </div>
     }
 }
 
 /// Combobox accessible avec ARIA complet
 #[component]
 fn Combobox<FS, FC>(
     label: &'static str,
     color: &'static str,
     all_stats: Memo<Vec<DeputeStats>>,
     selected: Memo<Option<DeputeStats>>,
     on_select: FS,
     on_clear: FC,
 ) -> impl IntoView
 where
     FS: Fn(DeputeStats) + 'static + Clone,
     FC: Fn() + 'static + Clone,
 {
-    let (query, set_query)   = create_signal(String::new());
-    let (open, set_open)     = create_signal(false);
-    let list_id              = label.replace(' ', "-").to_lowercase();
-    let input_id             = format!("{list_id}-input");
+    let (query, set_query) = create_signal(String::new());
+    let (open, set_open) = create_signal(false);
+    let list_id = label.replace(' ', "-").to_lowercase();
+    let input_id = format!("{list_id}-input");
 
     let suggestions = create_memo(move |_| {
         let q = query.get();
-        if q.trim().is_empty() { return vec![]; }
-        all_stats.get()
+        if q.trim().is_empty() {
+            return vec![];
+        }
+        all_stats
+            .get()
             .into_iter()
             .filter(|d| matches_search(&format!("{} {}", d.prenom, d.nom), &q))
             .take(8)
             .collect::<Vec<_>>()
     });
 
     view! {
         <div style="position:relative;">
             <label
                 for=input_id.clone()
                 style=format!("display:block;font-size:0.75rem;font-weight:600;color:{color};margin-bottom:0.4rem;text-transform:uppercase;letter-spacing:0.06em;")>
                 {label}
             </label>
 
             {move || selected.get().map(|d| {
                 let grp_color = groupe_color(d.groupe_abrev.as_deref());
                 let on_clear2 = on_clear.clone();
                 view! {
                     <div style="display:flex;align-items:center;justify-content:space-between;padding:0.5rem 0.75rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:6px;margin-bottom:0.25rem;">
                         <div>
                             <span style="font-weight:500;">{format!("{} {}", d.prenom, d.nom)}</span>
                             {d.groupe_abrev.as_ref().map(|g| view! {
                                 <span class="badge" style=format!("margin-left:0.5rem;border-color:{grp_color};color:{grp_color};")>
                                     {g.clone()}
                                 </span>
@@ -294,75 +301,85 @@ where
                                                         .and_then(|t| t.dyn_into::<web_sys::HtmlElement>().ok()) {
                                                         let _ = el.style().set_property("background", "var(--accent-dim)");
                                                     }
                                                 }
                                                 on:mouseout=move |e| {
                                                     if let Some(el) = e.target()
                                                         .and_then(|t| t.dyn_into::<web_sys::HtmlElement>().ok()) {
                                                         let _ = el.style().remove_property("background");
                                                     }
                                                 }
                                             >
                                                 {label_str}
                                             </li>
                                         }
                                     }).collect_view()}
                                 </ul>
                             })
                         }}
                     </div>
                 })
             }}
         </div>
     }
 }
 
-
 fn fmt_u32(v: f64) -> String {
     format!("{}", v as u32)
 }
 
 #[component]
 fn CmpRow(label: &'static str, va: Option<String>, vb: Option<String>) -> impl IntoView {
     view! {
         <tr>
             <td style="color:var(--text-muted);font-size:0.78rem;">{label}</td>
             <td style="color:var(--accent);">{va.unwrap_or_else(|| "—".to_string())}</td>
             <td style="color:#a78bfa;">{vb.unwrap_or_else(|| "—".to_string())}</td>
         </tr>
     }
 }
 
 #[component]
 fn CmpNum(
     label: &'static str,
     va: Option<f64>,
     vb: Option<f64>,
     fmt: fn(f64) -> String,
     higher_better: bool,
 ) -> impl IntoView {
     let winner = match (va, vb) {
         (Some(a), Some(b)) if (a - b).abs() > 1e-9 => {
-            if higher_better { if a > b { Some('a') } else { Some('b') } }
-            else              { if a < b { Some('a') } else { Some('b') } }
+            if higher_better {
+                if a > b {
+                    Some('a')
+                } else {
+                    Some('b')
+                }
+            } else {
+                if a < b {
+                    Some('a')
+                } else {
+                    Some('b')
+                }
+            }
         }
         _ => None,
     };
     let fmt_b = fmt;
     view! {
         <tr>
             <td style="color:var(--text-muted);font-size:0.78rem;">{label}</td>
             <td style=move || if winner == Some('a') {
                 "color:var(--accent);font-weight:700;"
             } else { "color:var(--accent);" }>
                 {va.map(|v| fmt(v)).unwrap_or_else(|| "—".to_string())}
                 {if winner == Some('a') { " ●" } else { "" }}
             </td>
             <td style=move || if winner == Some('b') {
                 "color:#a78bfa;font-weight:700;"
             } else { "color:#a78bfa;" }>
                 {vb.map(|v| fmt_b(v)).unwrap_or_else(|| "—".to_string())}
                 {if winner == Some('b') { " ●" } else { "" }}
             </td>
         </tr>
     }
 }
diff --git a/frontend/src/pages/depute.rs b/frontend/src/pages/depute.rs
index 4c89d1a8580f3ac4f9286bbcb41ab7eec7f4600b..c2ecd9ea6b4fbb54d480a9a4ebff258969b01148 100755
--- a/frontend/src/pages/depute.rs
+++ b/frontend/src/pages/depute.rs
@@ -1,50 +1,47 @@
 use leptos::*;
 use leptos_router::*;
 
 use crate::api::{base_url, fetch_deputy_ppl_shard};
-use crate::store::use_store;
-use crate::models::*;
-use crate::utils::{fmt_pct, groupe_color, participation_class, app_href};
 use crate::components::{
-    kpi_card::KpiCard,
-    period_selector::PeriodSelector,
-    skeleton::SkeletonKpi,
-    tooltip::InfoIcon,
+    kpi_card::KpiCard, period_selector::PeriodSelector, skeleton::SkeletonKpi, tooltip::InfoIcon,
 };
+use crate::models::*;
+use crate::store::use_store;
+use crate::utils::{app_href, fmt_pct, groupe_color, participation_class};
 
 fn period_query_value(period: Period) -> &'static str {
     match period {
         Period::P30 => "p30",
         Period::P180 => "p180",
         Period::Leg => "leg",
     }
 }
 
 #[component]
 pub fn DeputePage() -> impl IntoView {
-    let store  = use_store();
+    let store = use_store();
     let params = use_params_map();
     let params_for_ppl = params.clone();
     let dep_id = move || params.with(|p| p.get("id").cloned().unwrap_or_default());
 
     let (period, set_period) = create_signal(Period::P180);
     let (show_photo, set_show_photo) = create_signal(true);
 
     let deputy_ppl_res = create_resource(
         move || params_for_ppl.with(|p| p.get("id").cloned().unwrap_or_default()),
         |id| async move {
             if id.trim().is_empty() {
                 Ok(None)
             } else {
                 fetch_deputy_ppl_shard(&id).await
             }
         },
     );
 
     create_effect(move |_| {
         let _ = period.get();
         let _ = dep_id();
         set_show_photo.set(true);
     });
 
     // Chercher le député dans le store (pas de re-fetch)
@@ -130,54 +127,54 @@ pub fn DeputePage() -> impl IntoView {
                                     if !label.is_empty() && !labels.iter().any(|x| x == &label) {
                                         labels.push(label);
                                     }
                                 }
                                 labels
                             } else {
                                 d.sites_web
                                     .iter()
                                     .filter_map(|u| {
                                         let normalized = normalize_external_url(u);
                                         match website_href.as_ref() {
                                             Some(main) if main == &normalized => None,
                                             _ => Some(extra_site_label(&normalized)),
                                         }
                                     })
                                     .fold(Vec::new(), |mut acc, label| {
                                         if !label.is_empty() && !acc.iter().any(|x| x == &label) {
                                             acc.push(label);
                                         }
                                         acc
                                     })
                             };
                             let hatvp_href = d.uri_hatvp.as_deref().map(normalize_external_url);
 
                             view! {
-                                <div class="reveal">
+                                <div class="reveal depute-page">
                                     // Header enrichi (photo + liens + identité)
                                     <div style=format!("margin-bottom:1.5rem;padding-bottom:1.5rem;padding-left:0.9rem;border-bottom:1px solid var(--bg-border);border-left:4px solid {};", grp_color)>
-                                        <div style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:1rem;">
+                                        <div class="depute-hero-top" style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:1rem;">
                                             <div style="display:flex;align-items:flex-start;gap:1rem;flex-wrap:wrap;">
                                                 <div style=format!("width:96px;height:96px;border-radius:14px;overflow:hidden;border:1px solid {}33;background:var(--bg-secondary);display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 0 1px rgba(255,255,255,.02), 0 0 0 1px {}22;", grp_color, grp_color)>
                                                     {move || {
                                                         if show_photo.get() && has_photo {
                                                             view! {
                                                                 <img
                                                                     src=photo_url.clone()
                                                                     alt=photo_alt.clone()
                                                                     style="width:100%;height:100%;object-fit:cover;display:block;"
                                                                     on:error=move |_| set_show_photo.set(false)
                                                                 />
                                                             }.into_view()
                                                         } else {
                                                             view! {
                                                                 <span style="font-size:1.35rem;font-weight:700;color:var(--accent);letter-spacing:0.03em;">
                                                                     {initials.clone()}
                                                                 </span>
                                                             }.into_view()
                                                         }
                                                     }}
                                                 </div>
 
                                                 <div>
                                                     <h1 style="font-size:1.6rem;font-weight:700;margin:0 0 0.4rem 0;">
                                                         {format!("{} {}", d.prenom, d.nom)}
@@ -240,53 +237,53 @@ pub fn DeputePage() -> impl IntoView {
                                                                 target="_blank"
                                                                 rel="noopener noreferrer"
                                                                 style="font-size:0.75rem;padding:0.35rem 0.65rem;border:1px solid var(--bg-border);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);text-decoration:none;">
                                                                 "Site web ↗"
                                                             </a>
                                                         })}
                                                         {d.telephones.first().cloned().map(|tel| view! {
                                                             <span
                                                                 style="font-size:0.75rem;padding:0.35rem 0.65rem;border:1px solid var(--bg-border);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);text-decoration:none;">
                                                                 {format!("Tél. {}", tel)}
                                                             </span>
                                                         })}
                                                         {hatvp_href.clone().map(|url| view! {
                                                             <a
                                                                 href=url
                                                                 target="_blank"
                                                                 rel="noopener noreferrer"
                                                                 style="font-size:0.75rem;padding:0.35rem 0.65rem;border:1px solid var(--bg-border);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);text-decoration:none;">
                                                                 "HATVP ↗"
                                                             </a>
                                                         })}
                                                     </div>
                                                 </div>
                                             </div>
 
-                                            <div style="display:flex;flex-direction:column;gap:0.75rem;align-items:flex-end;min-width:260px;">
+                                            <div class="depute-period-panel" style="display:flex;flex-direction:column;gap:0.75rem;align-items:flex-end;min-width:260px;">
                                                 <PeriodSelector period=period set_period=set_period />
-                                                <div style=format!("padding:0.75rem 0.9rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:10px;min-width:260px;", grp_color)>
+                                                <div class="depute-period-card" style=format!("padding:0.75rem 0.9rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:10px;min-width:260px;", grp_color)>
                                                     <div style="font-size:0.72rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.35rem;">"Période calculée"</div>
                                                     <div style="font-size:0.82rem;color:var(--text-secondary);line-height:1.4;">
                                                         <strong style="color:var(--text-primary);">{format!("{} → {}", d.period_start, d.period_end)}</strong>
                                                         <div style="margin-top:0.2rem;">{format!("{} scrutins éligibles", d.scrutins_eligibles)}</div>
                                                     </div>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
 
                                     // KPIs
                                     <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(175px,1fr));gap:1rem;margin-bottom:1.75rem;">
                                         <KpiCard
                                             label="Participation scrutins"
                                             value=fmt_pct(d.participation_rate)
                                             sub=format!("{} / {} scrutins éligibles", d.votes_exprimes, d.scrutins_eligibles)
                                             color=part_class
                                         />
                                         <KpiCard
                                             label="Votes POUR"
                                             value=d.pour_count.to_string()
                                             sub="positions enregistrées".to_string()
                                             color="var(--success)"
                                         />
                                         <KpiCard
@@ -646,66 +643,66 @@ pub fn DeputePage() -> impl IntoView {
                                             <a href=dataset_json_url.clone() target="_blank" rel="noopener noreferrer" style="font-size:.75rem;padding:.35rem .65rem;border:1px solid var(--bg-border);border-radius:8px;background:rgba(255,255,255,0.01);color:var(--text-primary);text-decoration:none;">"JSON période ↗"</a>
                                             <a href=dataset_csv_url.clone() target="_blank" rel="noopener noreferrer" style="font-size:.75rem;padding:.35rem .65rem;border:1px solid var(--bg-border);border-radius:8px;background:rgba(255,255,255,0.01);color:var(--text-primary);text-decoration:none;">"CSV période ↗"</a>
                                             <a href=profile_url.clone() target="_blank" rel="noopener noreferrer" style="font-size:.75rem;padding:.35rem .65rem;border:1px solid var(--bg-border);border-radius:8px;background:rgba(255,255,255,0.01);color:var(--text-primary);text-decoration:none;">"Source AN ↗"</a>
                                         </div>
                                         <p style="margin:0;color:var(--text-muted);font-size:.78rem;line-height:1.5;">
                                             {format!("Période active: {} → {} · Scrutins éligibles: {} · Les comparaisons utilisent le dataset {} chargé côté navigateur.", d.period_start, d.period_end, d.scrutins_eligibles, current_period.label())}
                                         </p>
                                     </div>
 
                                     // Notice
                                     <div style=format!("padding:0.75rem 1rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:6px;font-size:0.75rem;color:var(--text-muted);line-height:1.6;", grp_color)>
                                         "Ces indicateurs mesurent uniquement l'activité observable dans les données open data officielles. "
                                         "Ils ne reflètent pas le travail local, les réunions non publiques, les négociations informelles ni l'implication hors hémicycle. "
                                         <A href=crate::app_path!("/methodologie") attr:style="color:var(--accent);">"→ Lire la méthodologie complète"</A>
                                     </div>
                                 </div>
                             }.into_view()
                         }
                     }
                 }
             }}
         </div>
     }
 }
 
-
 #[component]
 fn CosignNetworkSection(d: DeputeStats) -> impl IntoView {
     let accent_color = groupe_color(d.groupe_abrev.as_deref());
     let network = d.cosign_network.clone();
     let fallback_top = d.top_cosignataires.clone();
 
     if let Some(network) = network {
         let total = network.total_cosignatures;
         let unique = network.unique_cosignataires;
         let in_count = network.in_group_count;
         let out_count = network.out_group_count;
         let in_pct = pct_of(in_count, total);
         let out_pct = pct_of(out_count, total);
         let (badge_label, badge_color) = transversalite_badge(out_pct);
-        let has_any = total > 0 || !network.in_group.is_empty() || !network.out_group_groups.is_empty();
+        let has_any =
+            total > 0 || !network.in_group.is_empty() || !network.out_group_groups.is_empty();
 
         return view! {
             <div style="margin-bottom:1.75rem;">
                 <h2 style="font-size:0.85rem;font-weight:600;margin:0 0 0.75rem 0;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);display:flex;align-items:center;gap:0.4rem;">
                     "Co-signatures (réseau)"
                     <InfoIcon text="Répartition des co-signatures d'amendements observées sur la période active, entre co-signataires du même groupe et hors groupe. Une co-signature n'implique pas nécessairement le même niveau d'implication que l'auteur." />
                 </h2>
 
                 <div style=format!("background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:10px;padding:1rem;", accent_color)>
                     {if has_any {
                         view! {
                             <>
                                 <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:.6rem;margin-bottom:.85rem;">
                                     <MiniMetric label="Co-signatures" value=total.to_string() subtle="observées".to_string() />
                                     <MiniMetric label="Co-signataires uniques" value=unique.to_string() subtle="".to_string() />
                                     <MiniMetric label="Intra-groupe" value=format!("{:.1}%", in_pct) subtle=format!("{} occurrences", in_count) />
                                     <MiniMetric label="Hors groupe" value=format!("{:.1}%", out_pct) subtle=format!("{} occurrences", out_count) />
                                 </div>
 
                                 <div style="display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap;margin-bottom:.55rem;">
                                     <div style="font-size:.78rem;color:var(--text-secondary);">"Répartition des co-signatures sur la période active"</div>
                                     <span style=format!("font-size:.72rem;padding:.18rem .5rem;border:1px solid var(--bg-border);border-radius:999px;color:{};", badge_color)>{badge_label}</span>
                                 </div>
 
                                 <div style="display:flex;height:12px;border-radius:999px;overflow:hidden;border:1px solid var(--bg-border);background:rgba(255,255,255,.02);margin-bottom:.8rem;">
@@ -763,213 +760,228 @@ fn CosignNetworkSection(d: DeputeStats) -> impl IntoView {
 
                                 <p style="margin:.75rem 0 0 0;color:var(--text-muted);font-size:.74rem;line-height:1.5;">
                                     "Mesure basée sur les co-signatures d’amendements observées sur la période active. Une co-signature n’implique pas nécessairement le même niveau d’implication que l’auteur."
                                 </p>
                             </>
                         }.into_view()
                     } else {
                         view! {
                             <p style="margin:0;font-size:.8rem;color:var(--text-muted);">
                                 "Aucune co-signature exploitable sur cette période."
                             </p>
                         }.into_view()
                     }}
                 </div>
             </div>
         }.into_view();
     }
 
     if !fallback_top.is_empty() {
         return view! {
             <div style="margin-bottom:1.75rem;">
                 <h2 style="font-size:0.85rem;font-weight:600;margin:0 0 0.75rem 0;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);display:flex;align-items:center;gap:0.4rem;">
                     "Co-signatures (réseau)"
                     <InfoIcon text="Fallback d’affichage : détail réseau non disponible dans ce dataset, affichage des co-signataires les plus fréquents." />
                 </h2>
-                <div style=format!("background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:8px;overflow:hidden;", accent_color)>
+                <div style=format!("background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:8px;overflow-x:auto;", accent_color)>
                     <table class="data-table">
                         <thead>
                             <tr>
                                 <th>"Député"</th>
                                 <th>"Groupe"</th>
                                 <th>"Co-signatures"</th>
                             </tr>
                         </thead>
                         <tbody>
                             {fallback_top.iter().cloned().map(|c| {
                                 let deputy_id = c.deputy_id.clone();
                                 let deputy_href = app_href(&format!("/depute/{}", deputy_id));
                                 let full_name = format!("{} {}", c.prenom, c.nom);
                                 let groupe = c.groupe_abrev.unwrap_or_else(|| "—".to_string());
                                 let co_signed_count = c.co_signed_count;
                                 view! {
                                     <tr>
                                         <td>
                                             <A href=deputy_href attr:style="color:var(--text-primary);text-decoration:none;">
                                                 {full_name}
                                             </A>
                                             <div style="font-size:.7rem;color:var(--text-muted);font-family:monospace;">{deputy_id}</div>
                                         </td>
                                         <td>{groupe}</td>
                                         <td style="font-weight:600;color:var(--accent);">{co_signed_count}</td>
                                     </tr>
                                 }
                             }).collect_view()}
                         </tbody>
                     </table>
                 </div>
             </div>
         }.into_view();
     }
 
     view! {
         <div style="margin-bottom:1.75rem;">
             <h2 style="font-size:0.85rem;font-weight:600;margin:0 0 0.75rem 0;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-muted);display:flex;align-items:center;gap:0.4rem;">
                 "Co-signatures (réseau)"
                 <InfoIcon text="Répartition des co-signatures d'amendements observées sur la période active, intra-groupe vs hors groupe." />
             </h2>
             <div style=format!("background:var(--bg-secondary);border:1px solid var(--bg-border);border-left:3px solid {};border-radius:10px;padding:1rem;", accent_color)>
                 <p style="margin:0;font-size:.8rem;color:var(--text-muted);">"Aucune co-signature exploitable sur cette période."</p>
             </div>
         </div>
     }
     .into_view()
 }
 
 #[component]
-fn MiniMetric(label: &'static str, value: String, #[prop(optional)] subtle: Option<String>) -> impl IntoView {
+fn MiniMetric(
+    label: &'static str,
+    value: String,
+    #[prop(optional)] subtle: Option<String>,
+) -> impl IntoView {
     view! {
         <div style="padding:.6rem .7rem;border:1px solid var(--bg-border);border-radius:8px;background:rgba(255,255,255,.01);">
             <div style="font-size:.72rem;color:var(--text-secondary);margin-bottom:.15rem;">{label}</div>
             <div style="font-size:.95rem;font-weight:700;color:var(--text-primary);line-height:1.15;">{value}</div>
             {subtle.map(|txt| view! {
                 <div style="font-size:.7rem;color:var(--text-muted);margin-top:.18rem;">{txt}</div>
             })}
         </div>
     }
 }
 
 #[component]
 fn PeerRow(peer: CosignPeer) -> impl IntoView {
     let group = peer.groupe_abrev.clone().unwrap_or_else(|| "—".to_string());
     view! {
         <div style="display:flex;align-items:center;justify-content:space-between;gap:.5rem;padding:.35rem .45rem;border:1px solid rgba(255,255,255,.03);border-radius:6px;background:rgba(255,255,255,.01);">
             <div style="min-width:0;">
                 <A href=app_href(&format!("/depute/{}", peer.deputy_id)) attr:style="color:var(--text-primary);text-decoration:none;font-size:.78rem;">
                     {format!("{} {}", peer.prenom, peer.nom)}
                 </A>
                 <div style="font-size:.68rem;color:var(--text-muted);font-family:monospace;">{peer.deputy_id.clone()}</div>
             </div>
             <div style="display:flex;align-items:center;gap:.45rem;flex-shrink:0;">
                 <span style="font-size:.68rem;padding:.15rem .4rem;border:1px solid var(--bg-border);border-radius:999px;color:var(--text-secondary);">{group}</span>
                 <span style="font-size:.8rem;font-weight:700;color:var(--accent);min-width:2.2rem;text-align:right;">{peer.count}</span>
             </div>
         </div>
     }
 }
 
 fn pct_of(part: u32, total: u32) -> f64 {
-    if total == 0 { 0.0 } else { (part as f64 / total as f64) * 100.0 }
+    if total == 0 {
+        0.0
+    } else {
+        (part as f64 / total as f64) * 100.0
+    }
 }
 
 fn transversalite_badge(out_pct: f64) -> (&'static str, &'static str) {
     if out_pct > 25.0 {
         ("Transpartisan", "var(--warning)")
     } else if out_pct >= 10.0 {
         ("Mixte", "var(--accent)")
     } else {
         ("Très intra-groupe", "var(--success)")
     }
 }
 
 fn format_group_bucket_label(abrev: Option<&str>, nom: Option<&str>) -> String {
     match (abrev, nom) {
         (Some(a), Some(n)) if !a.is_empty() && !n.is_empty() => format!("{} — {}", a, n),
         (Some(a), _) if !a.is_empty() => a.to_string(),
         (_, Some(n)) if !n.is_empty() => n.to_string(),
         _ => "Groupe non renseigné".to_string(),
     }
 }
 
-
 #[derive(Debug, Clone)]
 struct PeriodSnapshotMini {
     period: Period,
     participation_rate: f64,
     amd_authored: u32,
     amd_adopted: u32,
     scrutins_eligibles: u32,
 }
 
 #[derive(Debug, Clone, Default)]
 struct Benchmarks {
     participation_median: Option<f64>,
     participation_group_avg: Option<f64>,
     amd_authored_median: Option<f64>,
     amd_authored_group_avg: Option<f64>,
     amd_adopted_median: Option<f64>,
     amd_adopted_group_avg: Option<f64>,
     amd_adoption_rate_median: Option<f64>,
     amd_adoption_rate_group_avg: Option<f64>,
 }
 
 #[component]
 fn BenchmarkRow(
     label: &'static str,
     value: f64,
     median: Option<f64>,
     group_avg: Option<f64>,
     #[prop(optional)] is_percent: bool,
 ) -> impl IntoView {
-    let value_label = if is_percent { fmt_pct(value) } else { fmt_number(value) };
+    let value_label = if is_percent {
+        fmt_pct(value)
+    } else {
+        fmt_number(value)
+    };
     let median_delta = median.map(|m| value - m);
     let group_delta = group_avg.map(|g| value - g);
 
     view! {
         <div style="padding:.65rem .75rem;border:1px solid var(--bg-border);border-radius:8px;background:rgba(255,255,255,.01);">
             <div style="display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap;">
                 <div style="font-size:.78rem;color:var(--text-secondary);">{label}</div>
                 <div style="font-size:.88rem;font-weight:600;color:var(--text-primary);">{value_label}</div>
             </div>
             <div style="display:flex;gap:.4rem;flex-wrap:wrap;margin-top:.4rem;">
                 <DeltaChip label="vs médiane" delta=median_delta is_percent=is_percent />
                 <DeltaChip label="vs groupe" delta=group_delta is_percent=is_percent />
             </div>
         </div>
     }
 }
 
 #[component]
 fn DeltaChip(
     label: &'static str,
     delta: Option<f64>,
     #[prop(optional)] is_percent: bool,
 ) -> impl IntoView {
     let (txt, color) = match delta {
         Some(d) => {
             let sign = if d > 0.0 { "+" } else { "" };
-            let v = if is_percent { format!("{sign}{:.1} pts", d * 100.0) } else { format!("{sign}{:.1}", d) };
+            let v = if is_percent {
+                format!("{sign}{:.1} pts", d * 100.0)
+            } else {
+                format!("{sign}{:.1}", d)
+            };
             let color = if d > 0.0 {
                 "var(--success)"
             } else if d < 0.0 {
                 "var(--danger)"
             } else {
                 "var(--text-muted)"
             };
             (format!("{label}: {v}"), color)
         }
         None => (format!("{label}: —"), "var(--text-muted)"),
     };
 
     view! {
         <span style=format!("font-size:.72rem;padding:.18rem .45rem;border:1px solid var(--bg-border);border-radius:999px;color:{color};")>
             {txt}
         </span>
     }
 }
 
 fn render_deputy_ppl_item(item: DeputyPplItemSummary) -> View {
     let title_meta = {
         let mut parts = Vec::new();
         if let Some(n) = &item.number {
             if !n.trim().is_empty() {
                 parts.push(format!("n°{}", n));
@@ -1017,122 +1029,128 @@ fn render_deputy_ppl_item(item: DeputyPplItemSummary) -> View {
                         view! { <></> }.into_view()
                     }}
                     <span style="font-size:.7rem;color:var(--text-muted);font-family:monospace;">{item.ppl_id.clone()}</span>
                 </div>
                 <div style="display:flex;align-items:center;gap:.35rem;flex-wrap:wrap;">
                     {if item.is_author {
                         view! {
                             <span style="display:inline-flex;align-items:center;padding:.14rem .45rem;border-radius:999px;font-size:.68rem;font-weight:600;background:rgba(34,197,94,.12);color:#22c55e;border:1px solid rgba(34,197,94,.25);">
                                 "Auteur"
                             </span>
                         }.into_view()
                     } else { view! { <></> }.into_view() }}
                     {if item.is_cosigner {
                         view! {
                             <span style="display:inline-flex;align-items:center;padding:.14rem .45rem;border-radius:999px;font-size:.68rem;font-weight:600;background:rgba(59,130,246,.12);color:#60a5fa;border:1px solid rgba(59,130,246,.25);">
                                 "Cosignataire"
                             </span>
                         }.into_view()
                     } else { view! { <></> }.into_view() }}
                 </div>
             </div>
         </div>
     }.into_view()
 }
 
-fn collect_period_snapshots(store: &crate::store::AppStore, deputy_id: &str) -> Vec<PeriodSnapshotMini> {
+fn collect_period_snapshots(
+    store: &crate::store::AppStore,
+    deputy_id: &str,
+) -> Vec<PeriodSnapshotMini> {
     [Period::P30, Period::P180, Period::Leg]
         .into_iter()
         .filter_map(|p| {
             store.find_depute(p, deputy_id).map(|d| PeriodSnapshotMini {
                 period: p,
                 participation_rate: d.participation_rate,
                 amd_authored: d.amd_authored,
                 amd_adopted: d.amd_adopted,
                 scrutins_eligibles: d.scrutins_eligibles,
             })
         })
         .collect()
 }
 
 fn compute_benchmarks(target: &DeputeStats, rows: &[DeputeStats]) -> Benchmarks {
     let same_group: Vec<&DeputeStats> = rows
         .iter()
         .filter(|r| r.groupe_abrev == target.groupe_abrev && r.groupe_nom == target.groupe_nom)
         .collect();
 
     Benchmarks {
         participation_median: median_of(rows.iter().map(|r| r.participation_rate)),
         participation_group_avg: mean_of(same_group.iter().map(|r| r.participation_rate)),
         amd_authored_median: median_of(rows.iter().map(|r| r.amd_authored as f64)),
         amd_authored_group_avg: mean_of(same_group.iter().map(|r| r.amd_authored as f64)),
         amd_adopted_median: median_of(rows.iter().map(|r| r.amd_adopted as f64)),
         amd_adopted_group_avg: mean_of(same_group.iter().map(|r| r.amd_adopted as f64)),
         amd_adoption_rate_median: median_of(rows.iter().filter_map(|r| r.amd_adoption_rate)),
         amd_adoption_rate_group_avg: mean_of(same_group.iter().filter_map(|r| r.amd_adoption_rate)),
     }
 }
 
 fn mean_of<I>(iter: I) -> Option<f64>
 where
     I: Iterator<Item = f64>,
 {
     let mut n = 0u32;
     let mut sum = 0.0f64;
     for v in iter {
         n += 1;
         sum += v;
     }
-    if n == 0 { None } else { Some(sum / n as f64) }
+    if n == 0 {
+        None
+    } else {
+        Some(sum / n as f64)
+    }
 }
 
 fn median_of<I>(iter: I) -> Option<f64>
 where
     I: Iterator<Item = f64>,
 {
     let mut v: Vec<f64> = iter.filter(|x| x.is_finite()).collect();
     if v.is_empty() {
         return None;
     }
     v.sort_by(|a, b| a.partial_cmp(b).unwrap_or(std::cmp::Ordering::Equal));
     let mid = v.len() / 2;
     if v.len() % 2 == 1 {
         Some(v[mid])
     } else {
         Some((v[mid - 1] + v[mid]) / 2.0)
     }
 }
 
 fn fmt_number(value: f64) -> String {
     if (value - value.round()).abs() < f64::EPSILON {
         format!("{}", value.round() as i64)
     } else {
         format!("{value:.1}")
     }
 }
 
-
 fn format_mandat_episodes_summary(episodes: &[MandatAssembleeEpisode]) -> String {
     episodes
         .iter()
         .map(|ep| format_mandat_episode(ep))
         .collect::<Vec<_>>()
         .join(" • ")
 }
 
 fn format_mandat_episode(ep: &MandatAssembleeEpisode) -> String {
     let fin = ep
         .date_fin
         .map(|d| d.to_string())
         .unwrap_or_else(|| "en cours".to_string());
     format!("{} → {}", ep.date_debut, fin)
 }
 
 fn an_profile_url(deputy_id: &str) -> String {
     format!("https://www.assemblee-nationale.fr/dyn/deputes/{deputy_id}")
 }
 
 fn an_photo_url(deputy_id: &str) -> Option<String> {
     // Les pages députés "dyn" pointent vers des photos avec identifiant numérique (sans préfixe PA)
     // Exemple observé: /dyn/static/tribun/17/photos/carre/1008.jpg pour PA1008.
     let numeric_id: String = deputy_id.chars().filter(|c| c.is_ascii_digit()).collect();
     if numeric_id.is_empty() {
@@ -1144,58 +1162,62 @@ fn an_photo_url(deputy_id: &str) -> Option<String> {
     ))
 }
 
 fn initials(prenom: &str, nom: &str) -> String {
     let p = prenom.chars().find(|c| c.is_alphabetic()).unwrap_or('?');
     let n = nom.chars().find(|c| c.is_alphabetic()).unwrap_or('?');
     let p = p.to_uppercase().collect::<String>();
     let n = n.to_uppercase().collect::<String>();
     format!("{}{}", p, n)
 }
 
 fn normalize_external_url(raw: &str) -> String {
     let raw = raw.trim();
     if raw.is_empty() {
         return String::new();
     }
     if raw.starts_with("http://") || raw.starts_with("https://") || raw.starts_with("mailto:") {
         raw.to_string()
     } else {
         format!("https://{}", raw.trim_start_matches('/'))
     }
 }
 
 fn dept_circo_label(dept: Option<&str>, circo: Option<&str>) -> Option<String> {
     match (dept, circo) {
-        (Some(d), Some(c)) if !d.is_empty() && !c.is_empty() => Some(format!("{} — Circonscription n°{}", d, c)),
+        (Some(d), Some(c)) if !d.is_empty() && !c.is_empty() => {
+            Some(format!("{} — Circonscription n°{}", d, c))
+        }
         (Some(d), _) if !d.is_empty() => Some(d.to_string()),
         _ => None,
     }
 }
 
 fn display_host(url: &str) -> String {
-    let s = url.trim_start_matches("https://").trim_start_matches("http://");
+    let s = url
+        .trim_start_matches("https://")
+        .trim_start_matches("http://");
     s.trim_end_matches('/').to_string()
 }
 
 fn extra_site_label_from_source(src: &SiteWebSource) -> String {
     let platform = src
         .type_libelle
         .as_deref()
         .map(str::trim)
         .filter(|s| !s.is_empty());
     let account = src.val_elec.trim();
 
     match (platform, account.is_empty()) {
         (Some(p), false) => format!("Présent(e) sur {} : {}", p, account),
         (Some(p), true) => format!("Présent(e) sur {}", p),
         (None, false) => {
             if let Some(url) = src.url.as_deref() {
                 extra_site_label(url)
             } else {
                 account.to_string()
             }
         }
         (None, true) => src
             .url
             .as_deref()
             .map(extra_site_label)
diff --git a/frontend/src/pages/reseau.rs b/frontend/src/pages/reseau.rs
index 75006567b52392fe766893208154ac0820abebc3..9d3938ad394656a701497455eb6d727d16fbb1c8 100644
--- a/frontend/src/pages/reseau.rs
+++ b/frontend/src/pages/reseau.rs
@@ -1,35 +1,35 @@
 use std::collections::{BTreeMap, HashMap};
 
 use chrono::NaiveDate;
 use leptos::*;
 use leptos_router::A;
 
-use crate::utils::app_href;
 use crate::components::period_selector::PeriodSelector;
 use crate::models::{CosignNetworkStats, DeputeStats, Period};
 use crate::store::use_store;
+use crate::utils::app_href;
 
 #[derive(Debug, Clone, Default, PartialEq)]
 struct GroupNode {
     key: String,
     label: String,
     full_name: String,
     deputy_count: usize,
     deputies_with_network: usize,
     total_cosignatures: u64,
     in_group_count: u64,
     out_group_count: u64,
 }
 
 impl GroupNode {
     fn transpartisan_rate(&self) -> f64 {
         if self.total_cosignatures == 0 {
             0.0
         } else {
             self.out_group_count as f64 / self.total_cosignatures as f64
         }
     }
 }
 
 #[derive(Debug, Clone, Default, PartialEq)]
 struct GroupEdge {
@@ -67,77 +67,72 @@ struct PartnerFlow {
     pct: f64,
 }
 
 #[derive(Debug, Clone, Default, PartialEq)]
 struct BridgeDeputy {
     deputy_id: String,
     nom_complet: String,
     out_group_count: u64,
     total_cosignatures: u64,
     transpartisan_rate: f64,
     unique_cosignataires: u32,
 }
 
 #[derive(Debug, Clone, Default, PartialEq)]
 struct FocusGroupData {
     group: GroupNode,
     incoming_total: u64,
     outgoing_total: u64,
     self_total: u64,
     incoming_partners: Vec<PartnerFlow>,
     outgoing_partners: Vec<PartnerFlow>,
     symmetric_partners: Vec<PartnerFlow>,
     bridge_deputies: Vec<BridgeDeputy>,
 }
 
-
 #[derive(Debug, Clone, Default)]
 struct TmpGroup {
     label: String,
     full_name: String,
     deputy_count: usize,
     deputies_with_network: usize,
     total_cosignatures: u64,
     in_group_count: u64,
     out_group_count: u64,
 }
 
 #[component]
 pub fn ReseauPage() -> impl IntoView {
     let store = use_store();
     let (period, set_period) = create_signal(Period::P180);
     let (selected_group, set_selected_group) = create_signal::<Option<String>>(None);
 
     let store_for_stats = store.clone();
     let stats_result = create_memo(move |_| store_for_stats.stats_for(period.get()).get());
 
-    let stats_data = create_memo(move |_| {
-        stats_result
-            .get()
-            .and_then(|r| r.ok())
-            .unwrap_or_default()
-    });
+    let stats_data =
+        create_memo(move |_| stats_result.get().and_then(|r| r.ok()).unwrap_or_default());
 
     let summary = create_memo(move |_| build_group_network(&stats_data.get()));
 
     let summary_for_default = summary.clone();
     create_effect(move |_| {
         let s = summary_for_default.get();
         let current = selected_group.get();
 
         if s.groups.is_empty() {
             if current.is_some() {
                 set_selected_group.set(None);
             }
             return;
         }
 
         let still_exists = current
             .as_ref()
             .map(|g| s.groups.iter().any(|x| x.key == *g))
             .unwrap_or(false);
 
         if !still_exists {
             set_selected_group.set(s.groups.first().map(|g| g.key.clone()));
         }
     });
 
@@ -203,51 +198,51 @@ pub fn ReseauPage() -> impl IntoView {
                                     "Aucune donnée de réseau exploitable sur cette période."
                                 </div>
                             }.into_view()
                         } else {
 
                         let period_label = match (s.period_start, s.period_end) {
                             (Some(a), Some(b)) => format!("{} → {}", a, b),
                             _ => period.get().label().to_string(),
                         };
 
                         let trans_share = if s.total_cosignatures > 0 {
                             s.total_out_group as f64 / s.total_cosignatures as f64
                         } else { 0.0 };
 
                         view! {
                             <>
                                 <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(185px,1fr));gap:.85rem;">
                                     <MetricCard label="Période effective" value=period_label sub="déduite du dataset chargé".to_string() />
                                     <MetricCard label="Groupes observés" value=s.groups.len().to_string() sub="avec non-inscrits si présents".to_string() />
                                     <MetricCard label="Députés couverts" value=format!("{} / {}", s.deputies_with_network, s.total_deputes) sub=format!("{} sans réseau détaillé", s.deputies_without_network) />
                                     <MetricCard label="Volume total (dir.)" value=fmt_u64(s.total_cosignatures) sub="somme des réseaux individuels".to_string() />
                                     <MetricCard label="Part intra-groupe" value=fmt_pct1_ratio(if s.total_cosignatures > 0 { s.total_in_group as f64 / s.total_cosignatures as f64 } else { 0.0 }) sub=fmt_u64(s.total_in_group) />
                                     <MetricCard label="Part transpartisane" value=fmt_pct1_ratio(trans_share) sub=fmt_u64(s.total_out_group) />
                                 </div>
 
-                                <div style="display:grid;grid-template-columns:minmax(260px,320px) 1fr;gap:1rem;align-items:start;">
+                                <div class="reseau-main-grid" style="display:grid;grid-template-columns:minmax(260px,320px) 1fr;gap:1rem;align-items:start;">
                                     <GroupListPanel
                                         summary=s.clone()
                                         selected_key=selected_key.clone()
                                         set_selected=set_selected_group
                                     />
 
                                     <div style="display:flex;flex-direction:column;gap:1rem;min-width:0;">
                                         <MatrixSection
                                             summary=s.clone()
                                             selected_key=selected_key.clone()
                                             set_selected=set_selected_group
                                         />
                                         <TopEdgesSection summary=s.clone() />
                                         <FocusGroupPanel focus=focus selected_key=selected_key />
                                     </div>
                                 </div>
 
                                 <div style="padding:.8rem .95rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:10px;font-size:.76rem;color:var(--text-muted);line-height:1.45;">
                                     <strong style="color:var(--text-secondary);">"Lecture"</strong>
                                     " : les volumes affichés sont issus des réseaux de co-signatures individuels (orientés source → cible). "
                                     "Ils mesurent une intensité relationnelle agrégée, pas un graphe social “unique” dédupliqué amendement par amendement."
                                 </div>
                             </>
                         }.into_view()
                         }
@@ -476,51 +471,51 @@ fn MatrixSection(
 
 #[component]
 fn TopEdgesSection(summary: GroupNetworkSummary) -> impl IntoView {
     let rows = summary.top_edges.into_iter().take(14).collect::<Vec<_>>();
     let max_val = rows.iter().map(|e| e.total).max().unwrap_or(1);
 
     view! {
         <section style="background:rgba(0,0,0,.12);border:1px solid var(--bg-border);border-radius:12px;overflow:hidden;">
             <div style="padding:.85rem 1rem;border-bottom:1px solid var(--bg-border);">
                 <h2 style="margin:0 0 .25rem 0;font-size:.88rem;font-weight:700;">"Liens inter-groupes les plus forts"</h2>
                 <p style="margin:0;color:var(--text-muted);font-size:.75rem;line-height:1.35;">
                     "Classement symétrisé (A→B + B→A) pour repérer les paires de groupes les plus connectées."
                 </p>
             </div>
 
             {if rows.is_empty() {
                 view! { <div style="padding:1rem;color:var(--text-muted);font-size:.78rem;">"Aucun lien inter-groupe disponible sur cette période."</div> }.into_view()
             } else {
                 view! {
                     <div style="padding:.75rem 1rem 1rem 1rem;display:flex;flex-direction:column;gap:.45rem;">
                         {rows.into_iter().map(|e| {
                             let pct = (e.total as f64 * 100.0 / max_val as f64).clamp(0.0, 100.0);
                             let left_color = group_color(&e.a_key);
                             let right_color = group_color(&e.b_key);
                             view! {
-                                <div style="display:grid;grid-template-columns:minmax(180px,1.2fr) minmax(120px,2fr) auto;gap:.7rem;align-items:center;">
+                                <div class="reseau-edge-row" style="display:grid;grid-template-columns:minmax(180px,1.2fr) minmax(120px,2fr) auto;gap:.7rem;align-items:center;">
                                     <div style="font-size:.77rem;color:var(--text-secondary);display:flex;align-items:center;gap:.45rem;min-width:0;">
                                         <span style=format!("width:8px;height:8px;border-radius:999px;background:{};display:inline-block;flex:0 0 auto;", left_color)></span>
                                         <span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">{e.a_label.clone()}</span>
                                         <span style="color:var(--text-muted);">"↔"</span>
                                         <span style=format!("width:8px;height:8px;border-radius:999px;background:{};display:inline-block;flex:0 0 auto;", right_color)></span>
                                         <span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">{e.b_label.clone()}</span>
                                     </div>
                                     <div style="height:8px;background:rgba(255,255,255,.03);border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.04);position:relative;">
                                         <div style=format!("height:100%;width:{:.3}%;background:linear-gradient(90deg, {} 0%, {} 100%);opacity:.9;", pct, left_color, right_color)></div>
                                     </div>
                                     <div style="text-align:right;font-size:.72rem;color:var(--text-muted);font-variant-numeric:tabular-nums;white-space:nowrap;">
                                         <strong style="color:var(--text-primary);">{fmt_u64(e.total)}</strong>
                                         <span style="margin-left:.4rem;">{format!("{} / {}", fmt_compact_u64(e.a_to_b), fmt_compact_u64(e.b_to_a))}</span>
                                     </div>
                                 </div>
                             }
                         }).collect_view()}
                     </div>
                 }.into_view()
             }}
         </section>
     }
 }
 
 #[component]
@@ -649,134 +644,154 @@ fn FocusGroupPanel(focus: Option<FocusGroupData>, selected_key: Option<String>)
         }
     }
 }
 
 #[component]
 fn Chip(label: String) -> impl IntoView {
     view! {
         <span style="display:inline-flex;align-items:center;padding:.18rem .55rem;border-radius:999px;border:1px solid var(--bg-border);background:var(--bg-secondary);font-size:.72rem;color:var(--text-secondary);font-variant-numeric:tabular-nums;">
             {label}
         </span>
     }
 }
 
 #[component]
 fn MiniStat(label: &'static str, value: String, sub: String) -> impl IntoView {
     view! {
         <div style="padding:.75rem .85rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:10px;">
             <div style="font-size:.68rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text-muted);margin-bottom:.25rem;">{label}</div>
             <div style="font-size:.95rem;font-weight:700;color:var(--text-primary);margin-bottom:.18rem;font-variant-numeric:tabular-nums;">{value}</div>
             <div style="font-size:.72rem;color:var(--text-muted);line-height:1.35;">{sub}</div>
         </div>
     }
 }
 
 #[component]
-fn PartnerListCard(title: &'static str, subtitle: &'static str, rows: Vec<PartnerFlow>, accent: String) -> impl IntoView {
+fn PartnerListCard(
+    title: &'static str,
+    subtitle: &'static str,
+    rows: Vec<PartnerFlow>,
+    accent: String,
+) -> impl IntoView {
     let rows = rows.into_iter().take(8).collect::<Vec<_>>();
     let max_v = rows.iter().map(|r| r.count).max().unwrap_or(1);
     view! {
         <div style="padding:.85rem .9rem;background:var(--bg-secondary);border:1px solid var(--bg-border);border-radius:10px;display:flex;flex-direction:column;gap:.55rem;">
             <div>
                 <h3 style="margin:0 0 .15rem 0;font-size:.78rem;font-weight:700;">{title}</h3>
                 <p style="margin:0;color:var(--text-muted);font-size:.7rem;line-height:1.35;">{subtitle}</p>
             </div>
 
             {if rows.is_empty() {
                 view! { <p style="margin:0;color:var(--text-muted);font-size:.74rem;">"Aucun flux disponible."</p> }.into_view()
             } else {
                 view! {
                     <div style="display:flex;flex-direction:column;gap:.4rem;">
                         {rows.into_iter().map(|r| {
                             let pct = (r.count as f64 * 100.0 / max_v as f64).clamp(0.0, 100.0);
                             view! {
-                                <div style="display:grid;grid-template-columns:minmax(90px,1.3fr) minmax(80px,2fr) auto;gap:.55rem;align-items:center;">
+                                <div class="reseau-partner-row" style="display:grid;grid-template-columns:minmax(90px,1.3fr) minmax(80px,2fr) auto;gap:.55rem;align-items:center;">
                                     <div title=r.full_name.clone() style="font-size:.74rem;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center;gap:.35rem;">
                                         <span style=format!("width:7px;height:7px;border-radius:999px;background:{};display:inline-block;", group_color(&r.key))></span>
                                         {r.label.clone()}
                                     </div>
                                     <div style="height:6px;background:rgba(255,255,255,.03);border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.04);">
                                         <div style=format!("height:100%;width:{:.3}%;background:{};opacity:.85;", pct, accent)></div>
                                     </div>
                                     <div style="font-size:.71rem;color:var(--text-muted);font-variant-numeric:tabular-nums;text-align:right;white-space:nowrap;">
                                         <strong style="color:var(--text-primary);">{fmt_compact_u64(r.count)}</strong>
                                         <span style="margin-left:.35rem;">{fmt_pct1(r.pct)}</span>
                                     </div>
                                 </div>
                             }
                         }).collect_view()}
                     </div>
                 }.into_view()
             }}
         </div>
     }
 }
 
 fn build_group_network(stats: &[DeputeStats]) -> GroupNetworkSummary {
-
     let mut groups: BTreeMap<String, TmpGroup> = BTreeMap::new();
     let mut matrix_map: HashMap<(String, String), u64> = HashMap::new();
 
     let mut total_cosignatures: u64 = 0;
     let mut total_in_group: u64 = 0;
     let mut total_out_group: u64 = 0;
     let mut deputies_with_network = 0usize;
     let mut period_start: Option<NaiveDate> = None;
     let mut period_end: Option<NaiveDate> = None;
 
     for d in stats {
         let gk = normalize_group_key(d.groupe_abrev.as_deref());
         let glabel = display_group_label(d.groupe_abrev.as_deref(), d.groupe_nom.as_deref());
         let gfull = d.groupe_nom.clone().unwrap_or_else(|| glabel.clone());
 
         let entry = groups.entry(gk.clone()).or_default();
         if entry.label.is_empty() {
             entry.label = glabel;
         }
         if entry.full_name.is_empty() {
             entry.full_name = gfull;
         }
         entry.deputy_count += 1;
 
-        period_start = Some(period_start.map(|x| x.min(d.period_start)).unwrap_or(d.period_start));
-        period_end = Some(period_end.map(|x| x.max(d.period_end)).unwrap_or(d.period_end));
+        period_start = Some(
+            period_start
+                .map(|x| x.min(d.period_start))
+                .unwrap_or(d.period_start),
+        );
+        period_end = Some(
+            period_end
+                .map(|x| x.max(d.period_end))
+                .unwrap_or(d.period_end),
+        );
 
         if let Some(net) = &d.cosign_network {
             deputies_with_network += 1;
             apply_cosign_network(&mut groups, &mut matrix_map, &gk, net);
             total_cosignatures += net.total_cosignatures as u64;
             total_in_group += net.in_group_count as u64;
             total_out_group += net.out_group_count as u64;
         }
     }
 
     let mut group_vec: Vec<GroupNode> = groups
         .into_iter()
         .map(|(key, g)| GroupNode {
             key: key.clone(),
-            label: if g.label.is_empty() { key.clone() } else { g.label },
-            full_name: if g.full_name.is_empty() { key.clone() } else { g.full_name },
+            label: if g.label.is_empty() {
+                key.clone()
+            } else {
+                g.label
+            },
+            full_name: if g.full_name.is_empty() {
+                key.clone()
+            } else {
+                g.full_name
+            },
             deputy_count: g.deputy_count,
             deputies_with_network: g.deputies_with_network,
             total_cosignatures: g.total_cosignatures,
             in_group_count: g.in_group_count,
             out_group_count: g.out_group_count,
         })
         .collect();
 
     group_vec.sort_by(|a, b| {
         b.total_cosignatures
             .cmp(&a.total_cosignatures)
             .then(b.deputy_count.cmp(&a.deputy_count))
             .then(a.label.cmp(&b.label))
     });
 
     let index: HashMap<&str, usize> = group_vec
         .iter()
         .enumerate()
         .map(|(i, g)| (g.key.as_str(), i))
         .collect();
 
     let n = group_vec.len();
     let mut matrix = vec![vec![0u64; n]; n];
 
     for ((src, dst), v) in matrix_map {
@@ -790,241 +805,286 @@ fn build_group_network(stats: &[DeputeStats]) -> GroupNetworkSummary {
         .flat_map(|r| r.iter().copied())
         .max()
         .unwrap_or(0);
 
     let mut top_edges: Vec<GroupEdge> = Vec::new();
     for i in 0..n {
         for j in (i + 1)..n {
             let a_to_b = matrix[i][j];
             let b_to_a = matrix[j][i];
             let total = a_to_b.saturating_add(b_to_a);
             if total == 0 {
                 continue;
             }
             top_edges.push(GroupEdge {
                 a_key: group_vec[i].key.clone(),
                 a_label: group_vec[i].label.clone(),
                 b_key: group_vec[j].key.clone(),
                 b_label: group_vec[j].label.clone(),
                 a_to_b,
                 b_to_a,
                 total,
             });
         }
     }
 
-    top_edges.sort_by(|a, b| b.total.cmp(&a.total).then(a.a_label.cmp(&b.a_label)).then(a.b_label.cmp(&b.b_label)));
+    top_edges.sort_by(|a, b| {
+        b.total
+            .cmp(&a.total)
+            .then(a.a_label.cmp(&b.a_label))
+            .then(a.b_label.cmp(&b.b_label))
+    });
 
     GroupNetworkSummary {
         groups: group_vec,
         matrix,
         matrix_max,
         total_deputes: stats.len(),
         deputies_with_network,
         deputies_without_network: stats.len().saturating_sub(deputies_with_network),
         total_cosignatures,
         total_in_group,
         total_out_group,
         top_edges,
         period_start,
         period_end,
     }
 }
 
-fn build_focus_group(summary: &GroupNetworkSummary, stats: &[DeputeStats], key: &str) -> Option<FocusGroupData> {
+fn build_focus_group(
+    summary: &GroupNetworkSummary,
+    stats: &[DeputeStats],
+    key: &str,
+) -> Option<FocusGroupData> {
     let idx = summary.groups.iter().position(|g| g.key == key)?;
     let group = summary.groups[idx].clone();
 
     let row = summary.matrix.get(idx)?;
     let outgoing_total = row
         .iter()
         .enumerate()
         .filter(|(j, _)| *j != idx)
         .map(|(_, v)| *v)
         .sum::<u64>();
     let incoming_total = summary
         .matrix
         .iter()
         .enumerate()
         .filter(|(i, _)| *i != idx)
         .map(|(_, r)| r[idx])
         .sum::<u64>();
     let self_total = summary.matrix[idx][idx];
 
     let outgoing_partners = build_partner_list_from_row(summary, idx, true);
     let incoming_partners = build_partner_list_from_row(summary, idx, false);
     let symmetric_partners = build_partner_list_symmetric(summary, idx);
 
     let mut bridge_deputies = stats
         .iter()
         .filter(|d| normalize_group_key(d.groupe_abrev.as_deref()) == key)
         .filter_map(|d| {
             let net = d.cosign_network.as_ref()?;
             let total = net.total_cosignatures as u64;
             if total == 0 {
                 return None;
             }
             let out = net.out_group_count as u64;
             Some(BridgeDeputy {
                 deputy_id: d.deputy_id.clone(),
                 nom_complet: format!("{} {}", d.prenom, d.nom),
                 out_group_count: out,
                 total_cosignatures: total,
-                transpartisan_rate: if total > 0 { out as f64 / total as f64 } else { 0.0 },
+                transpartisan_rate: if total > 0 {
+                    out as f64 / total as f64
+                } else {
+                    0.0
+                },
                 unique_cosignataires: net.unique_cosignataires,
             })
         })
         .collect::<Vec<_>>();
 
     bridge_deputies.sort_by(|a, b| {
         b.out_group_count
             .cmp(&a.out_group_count)
-            .then_with(|| b.transpartisan_rate.partial_cmp(&a.transpartisan_rate).unwrap_or(std::cmp::Ordering::Equal))
+            .then_with(|| {
+                b.transpartisan_rate
+                    .partial_cmp(&a.transpartisan_rate)
+                    .unwrap_or(std::cmp::Ordering::Equal)
+            })
             .then_with(|| a.nom_complet.cmp(&b.nom_complet))
     });
 
     Some(FocusGroupData {
         group,
         incoming_total,
         outgoing_total,
         self_total,
         incoming_partners,
         outgoing_partners,
         symmetric_partners,
         bridge_deputies,
     })
 }
 
-fn build_partner_list_from_row(summary: &GroupNetworkSummary, idx: usize, outgoing: bool) -> Vec<PartnerFlow> {
+fn build_partner_list_from_row(
+    summary: &GroupNetworkSummary,
+    idx: usize,
+    outgoing: bool,
+) -> Vec<PartnerFlow> {
     let total = if outgoing {
         summary.matrix[idx]
             .iter()
             .enumerate()
             .filter(|(j, _)| *j != idx)
             .map(|(_, v)| *v)
             .sum::<u64>()
     } else {
         summary
             .matrix
             .iter()
             .enumerate()
             .filter(|(i, _)| *i != idx)
             .map(|(_, row)| row[idx])
             .sum::<u64>()
     };
 
     let mut rows = Vec::new();
     for j in 0..summary.groups.len() {
         if j == idx {
             continue;
         }
-        let count = if outgoing { summary.matrix[idx][j] } else { summary.matrix[j][idx] };
+        let count = if outgoing {
+            summary.matrix[idx][j]
+        } else {
+            summary.matrix[j][idx]
+        };
         if count == 0 {
             continue;
         }
         let g = &summary.groups[j];
         rows.push(PartnerFlow {
             key: g.key.clone(),
             label: g.label.clone(),
             full_name: g.full_name.clone(),
             count,
-            pct: if total > 0 { count as f64 * 100.0 / total as f64 } else { 0.0 },
+            pct: if total > 0 {
+                count as f64 * 100.0 / total as f64
+            } else {
+                0.0
+            },
         });
     }
     rows.sort_by(|a, b| b.count.cmp(&a.count).then(a.label.cmp(&b.label)));
     rows
 }
 
 fn build_partner_list_symmetric(summary: &GroupNetworkSummary, idx: usize) -> Vec<PartnerFlow> {
     let mut total = 0u64;
     let mut rows = Vec::new();
     for j in 0..summary.groups.len() {
         if j == idx {
             continue;
         }
         let count = summary.matrix[idx][j].saturating_add(summary.matrix[j][idx]);
         if count == 0 {
             continue;
         }
         total = total.saturating_add(count);
         let g = &summary.groups[j];
         rows.push(PartnerFlow {
             key: g.key.clone(),
             label: g.label.clone(),
             full_name: g.full_name.clone(),
             count,
             pct: 0.0,
         });
     }
     for r in &mut rows {
-        r.pct = if total > 0 { r.count as f64 * 100.0 / total as f64 } else { 0.0 };
+        r.pct = if total > 0 {
+            r.count as f64 * 100.0 / total as f64
+        } else {
+            0.0
+        };
     }
     rows.sort_by(|a, b| b.count.cmp(&a.count).then(a.label.cmp(&b.label)));
     rows
 }
 
 fn apply_cosign_network(
     groups: &mut BTreeMap<String, TmpGroup>,
     matrix_map: &mut HashMap<(String, String), u64>,
     src_key: &str,
     net: &CosignNetworkStats,
 ) {
     if let Some(g) = groups.get_mut(src_key) {
         g.deputies_with_network += 1;
         g.total_cosignatures += net.total_cosignatures as u64;
         g.in_group_count += net.in_group_count as u64;
         g.out_group_count += net.out_group_count as u64;
     }
 
     let in_group = net.in_group_count as u64;
     if in_group > 0 {
-        *matrix_map.entry((src_key.to_string(), src_key.to_string())).or_insert(0) += in_group;
+        *matrix_map
+            .entry((src_key.to_string(), src_key.to_string()))
+            .or_insert(0) += in_group;
     }
 
     for bucket in &net.out_group_groups {
         let dst_key = normalize_group_key(bucket.groupe_abrev.as_deref());
-        let dst_label = display_group_label(bucket.groupe_abrev.as_deref(), bucket.groupe_nom.as_deref());
-        let dst_full = bucket.groupe_nom.clone().unwrap_or_else(|| dst_label.clone());
+        let dst_label =
+            display_group_label(bucket.groupe_abrev.as_deref(), bucket.groupe_nom.as_deref());
+        let dst_full = bucket
+            .groupe_nom
+            .clone()
+            .unwrap_or_else(|| dst_label.clone());
 
         let entry = groups.entry(dst_key.clone()).or_default();
         if entry.label.is_empty() {
             entry.label = dst_label;
         }
         if entry.full_name.is_empty() {
             entry.full_name = dst_full;
         }
 
         let count = bucket.count_total as u64;
         if count > 0 {
-            *matrix_map.entry((src_key.to_string(), dst_key)).or_insert(0) += count;
+            *matrix_map
+                .entry((src_key.to_string(), dst_key))
+                .or_insert(0) += count;
         }
     }
 }
 
 fn normalize_group_key(v: Option<&str>) -> String {
     let s = v.unwrap_or("NI").trim();
-    if s.is_empty() { "NI".to_string() } else { s.to_uppercase() }
+    if s.is_empty() {
+        "NI".to_string()
+    } else {
+        s.to_uppercase()
+    }
 }
 
 fn display_group_label(abrev: Option<&str>, nom: Option<&str>) -> String {
     let key = normalize_group_key(abrev);
     if key == "NI" {
         "NI".to_string()
     } else if !key.is_empty() {
         key
     } else {
         nom.unwrap_or("?").to_string()
     }
 }
 
 fn group_color(key: &str) -> &'static str {
     match key {
         "RN" => "#3b82f6",
         "EPR" | "RE" => "#f59e0b",
         "LFI" | "LFI-NFP" => "#ef4444",
         "SOC" | "PS" => "#ec4899",
         "HOR" => "#06b6d4",
         "GDR" => "#dc2626",
         "DEM" | "MODEM" | "MODEMDEM" | "DEMOCRATE" => "#a855f7",
         "LIOT" => "#84cc16",
         "UDR" | "UDDPLR" => "#f97316",
         "DR" => "#60a5fa",
